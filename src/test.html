<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
      import wepy from 'wepy'
      import api from '@/utils/api'
      import util from '@/utils/util' 

      export default class UserShow extends wepy.page {
        data = {
          // 用户数据
          user: null
        }
        async onLoad(options) {
            try{
                let userResponse = await api.request('users/' + options.id)

                if (userResponse.statusCode === 200) {
                    //格式化注册时间
                    this.user.created_at_diff = util.diffForHumans(this.user.created_at)
                    // 格式化最后活跃时间
                    this.user.last_actived_at_diff = util.diffForHumans(this.user.last_actived_at)

                    this.$apply()

                    // 动态设置页面标题
                    wepy.setNavigationBarTitle({
                        title: this.user.name + ' 的主页'
                    })
                }

            } catch (e) {
                console.log(e)
                wepy.showModal({
                    title: '提示',
                    content: '服务器错误，请联系管理员 '
                })
            }
        }
    }
</script>
</body>
</html>